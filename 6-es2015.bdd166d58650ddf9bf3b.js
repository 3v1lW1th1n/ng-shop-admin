(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{amxe:function(t,e,i){"use strict";i.r(e);var o=i("PCNd"),r=i("tyNb"),l=i("2qjx"),c=i("3Pt+"),n=i("fXoL"),s=i("GHq2"),a=i("ofXK");function d(t,e){1&t&&(n.Ub(0,"h2",13),n.Bc(1,"Add product"),n.Tb())}function u(t,e){1&t&&(n.Ub(0,"h2",13),n.Bc(1,"Edit product"),n.Tb())}let b=(()=>{class t{constructor(t,e){this.fb=t,this.validatorsService=e,this.isEdit=!1,this.form=this.fb.group({name:["",c.p.required,this.validatorsService.nameValidator.bind(this.validatorsService)],description:["",c.p.required],price:["",c.p.required],category:["",c.p.required],status:["",c.p.required]})}set product(t){t&&(this.isEdit=!0,this.form.patchValue(t))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(c.b),n.Ob(s.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-products-dialog"]],inputs:{product:"product"},decls:30,vars:8,consts:[[1,"popup-wrapper",3,"formGroup"],[1,"product-form"],["class","product-form-title",4,"ngIf"],[1,"product-form-label"],["formControlName","name","type","text","placeholder","Product name",1,"product-form-input"],["formControlName","description","type","text","placeholder","Description",1,"product-form-input","textarea"],["min","1","formControlName","price","type","number","placeholder","Price",1,"product-form-input"],["formControlName","category",1,"product-form-select"],[3,"value"],["formControlName","status",1,"product-form-select"],[1,"btnWrapp"],[1,"btn-inv",3,"disabled","click"],[1,"btn-inv",3,"click"],[1,"product-form-title"]],template:function(t,e){1&t&&(n.Ub(0,"form",0),n.Ub(1,"div",1),n.Ac(2,d,2,0,"h2",2),n.Ac(3,u,2,0,"h2",2),n.Ub(4,"label",3),n.Bc(5,"Product name"),n.Tb(),n.Pb(6,"input",4),n.Ub(7,"label",3),n.Bc(8,"Description"),n.Tb(),n.Pb(9,"textarea",5),n.Ub(10,"label",3),n.Bc(11,"Price"),n.Tb(),n.Pb(12,"input",6),n.Ub(13,"label",3),n.Bc(14,"Category"),n.Tb(),n.Ub(15,"select",7),n.Ub(16,"option",8),n.Bc(17),n.Tb(),n.Tb(),n.Ub(18,"label",3),n.Bc(19,"Status"),n.Tb(),n.Ub(20,"select",9),n.Ub(21,"option",8),n.Bc(22,"Enabled"),n.Tb(),n.Ub(23,"option",8),n.Bc(24,"Disabled"),n.Tb(),n.Tb(),n.Tb(),n.Ub(25,"div",10),n.Ub(26,"button",11),n.cc("click",(function(t){return e.save({isEdit:e.isEdit,value:e.form.value})})),n.Bc(27," Save "),n.Tb(),n.Ub(28,"button",12),n.cc("click",(function(t){return e.close()})),n.Bc(29,"Cancel"),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.lc("formGroup",e.form),n.Cb(2),n.lc("ngIf",!e.isEdit),n.Cb(1),n.lc("ngIf",e.isEdit),n.Cb(13),n.lc("value",!0),n.Cb(1),n.Cc(0),n.Cb(4),n.lc("value",!0),n.Cb(2),n.lc("value",!1),n.Cb(3),n.lc("disabled",e.form.invalid))},directives:[c.r,c.j,c.f,a.l,c.a,c.i,c.e,c.m,c.o,c.l,c.q],styles:[""]}),t})();var p=i("8BW4"),h=i("saQ5"),f=i("kt0X"),g=i("LRne"),m=i("xgIS"),T=i("5+tZ"),S=i("lJxs"),v=i("vkgz"),w=i("pLZG"),U=i("7o/Q"),y=i("D0XW");class O{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new C(t,this.period,this.scheduler))}}class C extends U.a{constructor(t,e,i){super(t),this.period=e,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(D,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function D(t){let{subscriber:e,period:i}=t;e.notifyNext(),this.schedule(t,i)}function P(t,e,i,o){const r=window&&!!window.document&&window.document.documentElement;let l=r&&e?window:i;if(t&&(l=t&&r&&"string"==typeof t?function(t,e,i){return(i?window.document:e).querySelector(t)}(t,i.nativeElement,o):t,!l))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return l}function _(t){return t&&!t.firstChange}const B={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},j={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class k{constructor(t=!0){this.vertical=t,this.propsMap=t?B:j}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function x(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function E(t,e){return t?e.document.documentElement:null}function H(t,e){const i=function({container:t,isWindow:e,axis:i}){const{offsetHeightKey:o,clientHeightKey:r}=K(i);return N(t,e,o,r)}(e);return e.isWindow?function(t,e,i){const{axis:o,container:r,isWindow:l}=i,{offsetHeightKey:c,clientHeightKey:n}=K(o),s=t+W(E(l,r),o,l),a=N(e.nativeElement,l,c,n);return{height:t,scrolled:s,totalToScroll:function(t,e,i){const o=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[o]+W(t,e,i)}(e.nativeElement,o,l)+a,isWindow:l}}(i,t,e):function(t,e,i){const{axis:o,container:r}=i;return{height:t,scrolled:r[o.scrollTopKey()],totalToScroll:r[o.scrollHeightKey()],isWindow:!1}}(i,0,e)}function K(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function N(t,e,i,o){if(isNaN(t[i])){const i=E(e,t);return i?i[o]:0}return t[i]}function W(t,e,i){const o=e.pageYOffsetKey(),r=e.scrollTopKey(),l=e.offsetTopKey();return isNaN(window[o])?E(i,t)[r]:t.ownerDocument?t.ownerDocument.defaultView[o]:t[l]}function I(t,e,i){let o,r;if(t.totalToScroll<=0)return!1;const l=t.isWindow?t.scrolled:t.height+t.scrolled;return i?(o=(t.totalToScroll-l)/t.totalToScroll,r=e.down/10):(o=t.scrolled/(t.scrolled+(t.totalToScroll-l)),r=e.up/10),o<=r}class M{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}function V(t){const{scrollDown:e,stats:{scrolled:i}}=t;return{type:e?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:i}}}let q=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new n.o,this.scrolledUp=new n.o,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:i}){const o=_(t),r=_(e),l=_(i),c=!r&&!this.infiniteScrollDisabled||r&&!e.currentValue||l;(o||r||l)&&(this.destroyScroller(),c&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:i,element:o,fromRoot:r}=t,l=function({windowElement:t,axis:e}){return function(t,e){return Object.assign({},t,{container:t.isWindow||e&&!e.nativeElement?e:e.nativeElement})}({axis:e,isWindow:x(t)},t)}({axis:new k(!t.horizontal),windowElement:P(e,i,o,r)}),c=new M({totalToScroll:H(o,l)}),n={up:t.upDistance,down:t.downDistance};return function(t){let e=Object(m.a)(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=y.a){return i=>i.lift(new O(t,e))}(t.throttle))),e}({container:l.container,throttle:t.throttle}).pipe(Object(T.a)(()=>Object(g.a)(H(o,l))),Object(S.a)(t=>function(t,e,i){const{scrollDown:o,fire:r}=function(t,e,i){const o=function(t,e){return t<e.scrolled}(t,e);return{fire:I(e,i,o),scrollDown:o}}(t,e,i);return{scrollDown:o,fire:r,stats:e}}(c.lastScrollPosition,t,n)),Object(v.a)(({stats:t})=>c.updateScroll(t.scrolled,t.totalToScroll)),Object(w.a)(({fire:e,scrollDown:i,stats:{totalToScroll:o}})=>function(t,e,i){return!(!t||!e)||!(i||!e)}(t.alwaysCallback,e,c.isTriggeredScroll(o,i))),Object(v.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{c.updateTriggeredFlag(e,t)}),Object(S.a)(V))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(e);case"[NGX_ISE] UP":return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(n.l),n.Ob(n.A))},t.\u0275dir=n.Jb({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[n.Ab()]}),t})(),z=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},providers:[],imports:[[]]}),t})();var A=i("NFeN");function F(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",23),n.Ub(1,"div",20),n.Pb(2,"img",24),n.Tb(),n.Ub(3,"div",20),n.Bc(4),n.Tb(),n.Ub(5,"div",20),n.Ub(6,"p"),n.Bc(7),n.Tb(),n.Tb(),n.Ub(8,"div",20),n.Bc(9),n.Tb(),n.Ub(10,"div",20),n.Bc(11,"111 "),n.Tb(),n.Ub(12,"div",20),n.Bc(13),n.Tb(),n.Ub(14,"div",25),n.Ub(15,"mat-icon",26),n.cc("click",(function(i){n.uc(t);const o=e.$implicit;return n.gc().editProduct(o)})),n.Bc(16,"edit"),n.Tb(),n.Ub(17,"mat-icon",26),n.cc("click",(function(i){n.uc(t);const o=e.$implicit;return n.gc().deleteProduct(o)})),n.Bc(18,"delete"),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit;n.Cb(2),n.mc("src",null==t.images[0]?null:t.images[0].url,n.vc),n.Cb(2),n.Dc(" ",t.name," "),n.Cb(3),n.Cc(t.description),n.Cb(2),n.Dc(" ",t.price," "),n.Cb(4),n.Dc(" ",t.status," ")}}const R=[{path:"",component:(()=>{class t{constructor(t,e,i){this.productsService=t,this._modalService=e,this.store=i,this.data=[],this.page=1,this.hasMore=!0,this.search=new c.c("")}ngOnInit(){this.store.select("products").subscribe(t=>{this.products=t.items,this.loader=t.loading,this.hasMore=t.hasMore}),this.store.dispatch(Object(p.h)({page:this.page}))}searchProduct(){}onScroll(){this.hasMore&&(this.page+=1,this.store.dispatch(Object(p.h)({page:this.page})))}deleteProduct(t){this.productsService.deleteProducts(t).subscribe(e=>{const i=this.data.findIndex(e=>e._id===t._id);this.data.splice(i,1),this.products=this.data})}editProduct(t){this._modalService.open({component:b,context:{product:t,save:({isEdit:e,value:i})=>{if(e)return this.productsService.editProducts(Object.assign(Object.assign({},t),i)).subscribe(t=>{const e=this.data.findIndex(e=>e._id===t._id);this.data.splice(e,1,t),this.products=this.data}),void this._modalService.close();this.productsService.addProducts(i).subscribe(t=>{this.products.push(t)}),this._modalService.close()},close:()=>{this._modalService.close()}}})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(l.a),n.Ob(h.a),n.Ob(f.h))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-products"]],inputs:{product:"product"},features:[n.Bb([l.a])],decls:55,vars:4,consts:[[1,"products-list",2,"background-color","var(--grey-skeleton)","margin","100px","height","calc(100vh - 200px)"],[1,"content__top-panel"],[1,"page-title"],["type","button",1,"button-primary",3,"click"],[1,"content-box","content-box_small"],[1,"form-inline"],[1,"form-group"],[1,"form-label"],["type","text","placeholder","Product name",1,"form-control",3,"formControl","change"],["data-elem","sliderContainer",1,"form-group"],[1,"range-slider"],[1,"range-slider__inner"],[1,"range-slider__progress",2,"left","0%","right","0%"],[1,"range-slider__thumb-left",2,"left","0%"],[1,"range-slider__thumb-right",2,"right","0%"],["data-elem","filterStatus",1,"form-control"],["value","true","selected",""],["value","false"],["infiniteScroll","",1,"sortable-table",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"sortable-table__header","sortable-table__row"],[1,"sortable-table__cell"],["data-elem","body",1,"sortable-table__body"],["class","sortable-table__row",4,"ngFor","ngForOf"],[1,"sortable-table__row"],["alt","img",1,"sortable-table-image",3,"src"],[1,"sortable-table__cell","table__cell_controls"],[1,"btn-edit",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"h1",2),n.Bc(3," Products "),n.Tb(),n.Ub(4,"button",3),n.cc("click",(function(t){return e.editProduct()})),n.Bc(5," Add product "),n.Tb(),n.Tb(),n.Ub(6,"div",4),n.Ub(7,"form",5),n.Ub(8,"div",6),n.Ub(9,"label",7),n.Bc(10,"Filter by:"),n.Tb(),n.Ub(11,"input",8),n.cc("change",(function(t){return e.searchProduct()})),n.Tb(),n.Tb(),n.Ub(12,"div",9),n.Ub(13,"label",7),n.Bc(14,"Price:"),n.Tb(),n.Ub(15,"div",10),n.Ub(16,"span"),n.Bc(17,"$0"),n.Tb(),n.Ub(18,"div",11),n.Pb(19,"span",12),n.Pb(20,"span",13),n.Pb(21,"span",14),n.Tb(),n.Ub(22,"span"),n.Bc(23,"$4000"),n.Tb(),n.Tb(),n.Tb(),n.Ub(24,"div",6),n.Ub(25,"label",7),n.Bc(26,"Status:"),n.Tb(),n.Ub(27,"select",15),n.Ub(28,"option",16),n.Bc(29,"Enabled"),n.Tb(),n.Ub(30,"option",17),n.Bc(31,"Disabled"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(32,"div",18),n.cc("scrolled",(function(t){return e.onScroll()})),n.Ub(33,"div",19),n.Ub(34,"div",20),n.Ub(35,"span"),n.Bc(36,"Image"),n.Tb(),n.Tb(),n.Ub(37,"div",20),n.Ub(38,"span"),n.Bc(39,"Name"),n.Tb(),n.Tb(),n.Ub(40,"div",20),n.Ub(41,"span"),n.Bc(42,"Description"),n.Tb(),n.Tb(),n.Ub(43,"div",20),n.Ub(44,"span"),n.Bc(45,"Price"),n.Tb(),n.Tb(),n.Ub(46,"div",20),n.Ub(47,"span"),n.Bc(48,"Subcategory"),n.Tb(),n.Tb(),n.Ub(49,"div",20),n.Ub(50,"span"),n.Bc(51,"Status"),n.Tb(),n.Tb(),n.Pb(52,"div",20),n.Tb(),n.Ub(53,"div",21),n.Ac(54,F,19,5,"div",22),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(11),n.lc("formControl",e.search),n.Cb(21),n.lc("infiniteScrollDistance",2)("infiniteScrollThrottle",50),n.Cb(22),n.lc("ngForOf",e.products))},directives:[c.r,c.j,c.k,c.a,c.i,c.d,c.l,c.q,q,a.k,A.a],styles:[""]}),t})()}];let X=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[r.c.forChild(R)],r.c]}),t})();var Y=i("snw9"),$=i("eIep"),G=i("JIr8"),L=i("EY2u");let J=(()=>{class t{constructor(t,e){this.actions=t,this.productsService=e,this.getProduct$=Object(Y.c)(()=>this.actions.pipe(Object(Y.d)(p.h),Object($.a)(t=>this.productsService.getProducts(t).pipe(Object(S.a)(t=>t.length<20?Object(p.i)({products:t,hasMore:!1}):Object(p.i)({products:t,hasMore:!0})),Object(G.a)(t=>(console.log(t),L.a)))))),this.createProduct$=Object(Y.c)(()=>this.actions.pipe(Object(Y.d)(p.b))),this.updateProduct$=Object(Y.c)(()=>this.actions.pipe(Object(Y.d)(p.k))),this.deleteProduct$=Object(Y.c)(()=>this.actions.pipe(Object(Y.d)(p.e)))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(Y.a),n.Yb(l.a))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=i("s++N");i.d(e,"ProductsModule",(function(){return Z}));let Z=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[z,X,o.a,f.j.forFeature("products",Q.a),Y.b.forFeature([J])],o.a]}),t})()}}]);